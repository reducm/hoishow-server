<div class="search">
  <%= form_tag(boombox_operation_boom_topics_path, class: 'form-inline', method: 'get') do %>
    <%= text_field_tag "q", params[:q],  class: 'form-control', placeholder: "输入关键词" %>
    <%= submit_tag "搜索", class: 'btn btn-default' %>
  <% end %>
</div>

<table class="table table-hover boom_topics_list">
  <thead>
    <tr>
      <th>内容</th>
      <th>点赞</th>
      <th>评论</th>
      <th>创建时间</th>
      <th>最后评论时间</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
  <% if boom_topics.any? %>
    <% boom_topics.each do |boom_topic| %>
      <tr>
        <td style="width: 30%"><%= truncate(boom_topic.content, length: 150) %></td>
        <td><%= boom_topic.likes_count %></td>
        <td><%= boom_topic.comments_count %></td>
        <td><%= boom_topic.created_at.strfcn_time %></td>
        <td><%= boom_topic.last_reply_time.strfcn_time %></td>
        <td>
          <% if boom_topic.is_top? %>
            已置顶
          <% else %>
            <%= link_to "置顶", set_top_boombox_operation_boom_topic_path(boom_topic), method: :post %>
          <% end %>
          <%= link_to "查看详情", boombox_operation_boom_topic_path(boom_topic)%>
        </td>
      </tr>
    <% end %>
  <% else %>
    <tr><td>无数据</td></tr>
  <% end %>
  </tbody>
</table>

<div class="dropup topic-per">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    每页显示数量
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
    <li><%= link_to "5", boombox_operation_boom_topics_path(q: params[:q], page: params[:page], per: 5) %></li> 
    <li><%= link_to "10", boombox_operation_boom_topics_path(q: params[:q], page: params[:page], per: 10) %></li> 
    <li><%= link_to "20", boombox_operation_boom_topics_path(q: params[:q], page: params[:page], per: 20) %></li> 
  </ul>
</div>

<%= paginate boom_topics %>
